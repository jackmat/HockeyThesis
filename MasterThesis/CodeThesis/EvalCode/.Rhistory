library(Rcpp)
states <- read.csv(file="C:/Users/Carles/Desktop/MasterThesis/CodeThesis/state_graph.csv", header=TRUE)
colnames(states) <- c("NodeId", "Occurrence", "ChildId", "ChildOccurrence", "RewardGoal", "RewardWin", "Team", "PlayerId")
sourceCpp("C:/Users/Carles/Desktop/MasterThesis/CodeThesis/EvalCode/value_iteration/value_iteration_f.cpp")
value_iteration <- function(states, n, c) {
#Init variables
unique_states <- subset(states, !duplicated(NodeId))
nr_of_states <- nrow(unique_states)
s_ids <- unique_states[,"NodeId"]
s_occ <- unique_states[,"Occurrence"]
r_w <- unique_states[,"RewardWin"]
r_g <- unique_states[,"RewardGoal"]
q <- value_iteration_f(states, n, c, nr_of_states, r_w, r_g, s_occ, s_ids)
return(q)
}
system.time(q <- value_iteration(states, 100000, 0.0001))
write.csv(q, file="C:/Users/Carles/Desktop/MasterThesis/CodeThesis/q_table.csv")
write.csv(q, file="C:/Users/Carles/Desktop/MasterThesis/CodeThesis/q_table2.csv")
library(Rcpp)
#Load data
states <- read.csv(file="C:/Users/Carles/Desktop/MasterThesis/CodeThesis/state_graph.csv", header=TRUE)
colnames(states) <- c("NodeId", "Occurrence", "ChildId", "ChildOccurrence", "RewardGoal", "RewardWin", "Team", "PlayerId")
sourceCpp("C:/Users/Carles/Desktop/MasterThesis/CodeThesis/EvalCode/value_iteration/value_iteration_f.cpp")
# states <- states[,2:9] # When stored, an index was created which is now eliminated
#value iteration
value_iteration <- function(states, n, c) {
#Init variables
unique_states <- subset(states, !duplicated(NodeId))
nr_of_states <- nrow(unique_states)
s_ids <- unique_states[,"NodeId"]
s_occ <- unique_states[,"Occurrence"]
r_w <- unique_states[,"RewardWin"]
r_g <- unique_states[,"RewardGoal"]
q <- value_iteration_f(states, n, c, nr_of_states, r_w, r_g, s_occ, s_ids)
return(q)
}
system.time(q <- value_iteration(states, 100000, 0.0001))
write.csv(q, file="C:/Users/Carles/Desktop/MasterThesis/CodeThesis/q_table.csv")
write.csv(q, file="C:/Users/Carles/Desktop/MasterThesis/CodeThesis/q_table2.csv")
##NodeId, expected_goals, probability_next_home_goal, probability_next_away_goal
#Dataset<-read.csv(file="C:/Users/Carles/Desktop/MasterThesis/CodeThesis/q_table2.csv")
#head(Dataset)
z<-q
z$V3<-z$V3/(z$V3+z$V4)
z$V4<-z$V4/(z$V3+z$V4)
write.csv(z, file="C:/Users/Carles/Desktop/MasterThesis/CodeThesis/q_table_norm.csv")
write.csv(z, file="C:/Users/Carles/Desktop/MasterThesis/CodeThesis/q_table2_norm.csv")
z<-q
z
colnames(z)<- c("V1","V2", "V3", "V4")
z$V3<-z$V3/(z$V3+z$V4)
z
dim(z)
q
class(q)
V2 <-q[,2]
Dataset<-read.csv(file="C:/Users/Carles/Desktop/MasterThesis/CodeThesis/q_table2.csv")
z<-Dataset
colnames(z)
head(z)
V3<-z$V3/(z$V3+z$V4)
V4<-z$V4/(z$V3+z$V4)
z$V3<-z$V3/(z$V3+z$V4)
Z$v4<-z$V4/(z$V3+z$V4)
z$v4<-z$V4/(z$V3+z$V4)
head(z)
z<-Dataset
colnames(z)<- c("V1","V2", "V3", "V4")
head(z)
z<-Dataset
head(z)
z$V3<-z$V3/(z$V3+z$V4)
z$V4<-z$V4/(z$V3+z$V4)
head(z)
z<-Dataset
head(z)
z$V3<-z$V3/(z$V3+z$V4)
z$V4<-z$V4/(z$V3+z$V4)
head(z)
z<-Dataset
head(z)
a<-z$V3/(z$V3+z$V4)
b<-z$V4/(z$V3+z$V4)
z$V3<-a
z$V4<-b
head(z)
head(z,10)
write.csv(z, file="C:/Users/Carles/Desktop/MasterThesis/CodeThesis/q_table_norm.csv")
write.csv(z, file="C:/Users/Carles/Desktop/MasterThesis/CodeThesis/q_table2_norm.csv")
